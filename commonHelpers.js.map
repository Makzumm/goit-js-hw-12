{"version":3,"file":"commonHelpers.js","sources":["../src/js/vars.js","../src/js/render-functions.js","../src/js/pixaby-api.js","../src/js/clearHtmlFunc.js","../src/js/simplelightbox-init.js","../src/js/handlePromise.js","../src/js/loadMoreBtnFunc.js","../src/js/inputHandler.js","../src/main.js"],"sourcesContent":["export const refs = {\n    loadMoreButtonEl: document.querySelector('.load-more'),\n    galleryWrapperEl: document.querySelector('.gallery'),\n    formEl: document.querySelector('form#search-form'),\n    inputEl: document.querySelector('input[type=\"text\"]'),\n    loaderEl: document.querySelector('.loader'),\n}","export function createMarkUp(data) {\n    const HTMLMarkUp = data.map((el) => {\n        return `\n        <div class=\"photo-card\">\n            <a class=\"gallery__item\" href=\"${el.largeImageURL}\">\n                    <img\n                    class=\"photo\"\n                    src=\"${el.webformatURL}\"\n                    loading=\"lazy\"\n                    alt=\"${el.tags}\"\n                />\n            </a>\n            <div class=\"photo-card__info\">\n                <p class=\"photo-card__info--item\">\n                <b>Likes ${el.likes}</b>\n                </p>\n                <p class=\"photo-card__info--item\">\n                <b>Views ${el.views}</b>\n                </p>\n                <p class=\"photo-card__info--item\">\n                <b>Comments ${el.comments}</b>\n                </p>\n                <p class=\"photo-card__info--item\">\n                <b>Downloads ${el.downloads}</b>\n                </p>\n            </div>\n        </div>\n    `\n    }).join('')\n\n    return HTMLMarkUp;\n}","import axios from 'axios';\n\nexport class FetchImage {\n    constructor() {\n        this.page = 1;\n        this._searchQuery = '';\n    }\n\n    async getImage() {\n        const API_KEY = '36626377-ec15308a2cdcc9d1051736749';\n        const params = new URLSearchParams({\n            key: `${API_KEY}`,\n            q: this.query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: 20,\n            page: this.page,\n        })\n\n        const url = `https://pixabay.com/api/?${params}`;\n\n        const response = await axios.get(url)\n\n        if (response.status === 404) {\n            return [];\n        }\n\n        return response;\n    }\n\n    increasePage() {\n        this.page += 1;\n        console.log(this.page)\n    }\n\n    pageToStartPosition() {\n        this.page = 1;\n        console.log(this.page)\n    }\n\n    get fetchedData() {\n        return this._searchQuery;\n    }\n\n    set fetchedData(string) {\n        this._searchQuery = string.trim() || '';\n    }\n\n}","import { refs } from \"./vars\";\n\nexport function onClearHTMLFunc() {\n    refs.galleryWrapperEl.innerHTML = '';\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallerySimpleLightbox = new SimpleLightbox('.gallery a');\nexport default gallerySimpleLightbox;","import { refs } from \"./vars\";\nimport { createMarkUp } from '/js/render-functions.js';\nimport { FetchImage } from '/js/pixaby-api.js';\nconst fetchImages = new FetchImage();\nimport { onClearHTMLFunc } from '/js/clearHtmlFunc.js';\n\nimport gallerySimpleLightbox from \"./simplelightbox-init.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function onformEl(e) {\n    e.preventDefault();\n\n    fetchImages.query = refs.inputEl.value.trim();\n    refs.inputEl.blur()\n\n    if (fetchImages.query === '') {\n        iziToast.info({\n            position: 'topRight',\n            message: 'Please, type something.'\n        });\n        e.target.reset();\n        onClearHTMLFunc();\n        return;\n    }\n\n    refs.loaderEl.classList.remove('is-hidden');\n\n    try {\n        const data = await fetchImages.getImage(fetchImages.fetchedData);\n        console.log(data)\n        if (!data.data || !data.data.hits || data.data.hits.length === 0) {\n            iziToast.warning({\n                position: 'topRight',\n                maxWidth: '430px',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageSize: '16px',\n                messageLineHeight: '24px',\n                progressBarColor: '#B51B1B',\n                color: '#EF4040',\n                messageColor: \"#ffffff\",\n            });\n            onClearHTMLFunc();\n            refs.loadMoreButtonEl.classList.add('is-hidden');\n            refs.loaderEl.classList.add('is-hidden');\n            return;\n        }\n\n        refs.loaderEl.classList.add('is-hidden');\n        fetchImages.pageToStartPosition();\n        onClearHTMLFunc();\n        refs.galleryWrapperEl.insertAdjacentHTML('beforeend', createMarkUp(data.data.hits));\n\n        iziToast.success({\n            position: 'topRight',\n            message: `Hooray! We found ${data.data.totalHits} images.`,\n        });\n\n        if (!data.data.hits.length) {\n            return [];\n        } else {\n            refs.loadMoreButtonEl.classList.remove('is-hidden');\n        }\n\n        if (data.data.totalHits <= 20) {\n            refs.loadMoreButtonEl.classList.add('is-hidden');\n        }\n\n        gallerySimpleLightbox.refresh();\n\n    } catch (error) {\n        console.error(`Error: ${error}`)\n    }\n}","import { refs } from './vars';\nimport { FetchImage } from '/js/pixaby-api.js';\nimport { createMarkUp } from '/js/render-functions.js';\n\nconst fetchImg = new FetchImage();\n\nimport gallerySimpleLightbox from \"./simplelightbox-init.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function onLoadMoreButtonEl() {\n\n    fetchImg.increasePage();\n\n    try {\n        const searchQuery = refs.inputEl.value.trim();\n        fetchImg.query = searchQuery;\n        const response = await fetchImg.getImage(fetchImg.fetchedData);\n\n        if (!response || !response.data || !response.data.hits || response.data.hits.length === 0) {\n            iziToast.info({\n                position: 'topRight',\n                maxWidth: '430px',\n                message: 'Sorry, there are no more images!',\n                messageSize: '16px',\n                messageLineHeight: '24px',\n                progressBarColor: '#B51B1B',\n                color: '#EF4040',\n                messageColor: \"#ffffff\",\n            });\n            return;\n        }\n\n        refs.galleryWrapperEl.insertAdjacentHTML('beforeend', createMarkUp(response.data.hits));\n\n        gallerySimpleLightbox.refresh()\n\n    } catch (error) {\n        console.log(error)\n    }\n}","import { refs } from './vars';;\nimport { FetchImage } from '/js/pixaby-api.js';\nimport { onClearHTMLFunc } from './clearHtmlFunc';\nconst fetchImg = new FetchImage();\n\nexport function onHandleInput(event) {\n    const inputValue = event.target.value.trim();\n    if (inputValue === '') {\n        fetchImg.pageToStartPosition();\n        refs.loadMoreButtonEl.classList.add('is-hidden');\n        onClearHTMLFunc();\n    } else {\n        fetchImg.fetchedData = inputValue;\n    }\n}","import { refs } from './js/vars.js';\nimport { onformEl } from './js/handlePromise.js';\nimport { onLoadMoreButtonEl } from './js/loadMoreBtnFunc.js';\nimport { onHandleInput } from './js/inputHandler.js';\n\nimport { FetchImage } from '/js/pixaby-api.js';\nconst fetchImages = new FetchImage();\n\nrefs.inputEl.addEventListener('input', onHandleInput);\n\nrefs.formEl.addEventListener('submit', onformEl);\n\nrefs.loadMoreButtonEl.addEventListener('click', onLoadMoreButtonEl);\n\n\n"],"names":["refs","createMarkUp","data","el","FetchImage","API_KEY","url","response","axios","string","onClearHTMLFunc","gallerySimpleLightbox","SimpleLightbox","fetchImages","onformEl","e","iziToast","error","fetchImg","onLoadMoreButtonEl","searchQuery","onHandleInput","event","inputValue"],"mappings":"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"}